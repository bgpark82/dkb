# 프로메테우스 (Prometheus)

## 프로메테우스란?

프로메테우스(Prometheus)는 시스템 및 서비스의 상태를 모니터링하기 위한 오픈소스 도구입니다. SoundCloud에서 처음 개발되었고, 현재는 쿠버네티스 다음으로 CNCF(Cloud Native Computing Foundation)를 졸업한 두 번째 프로젝트일 정도로 클라우드 네이티브 환경에서 매우 중요하게 사용되고 있습니다.

## 주요 특징

*   **메트릭 기반 모니터링:** 프로메테우스는 CPU 사용률, 메모리 사용량, 네트워크 트래픽과 같은 숫자 데이터를 '메트릭'이라는 단위로 수집하여 모니터링합니다. 이 데이터는 시간의 흐름에 따라 기록된 시계열(time series) 데이터로 저장됩니다.
*   **Pull 방식의 데이터 수집:** 대부분의 모니터링 도구가 각 서버에서 수집한 데이터를 중앙 서버로 보내는 'Push' 방식을 사용하는 것과 달리, 프로메테우스는 중앙 서버가 직접 대상 시스템에 접근하여 데이터를 가져오는 'Pull' 방식을 사용합니다.
*   **강력한 쿼리 언어 (PromQL):** PromQL이라는 자체 쿼리 언어를 사용하여 수집된 시계열 데이터를 실시간으로 조회하고 집계할 수 있습니다.
*   **서비스 디스커버리:** 쿠버네티스와 같이 동적으로 자원이 변하는 환경에서 모니터링 대상을 자동으로 탐지하고 등록하는 기능을 제공합니다.
*   **시각화 및 경고:** 그라파나(Grafana)와 같은 시각화 도구와 연동하여 수집한 데이터를 대시보드 형태로 볼 수 있으며, Alertmanager를 통해 특정 조건에 따라 경고를 생성하고 관리할 수 있습니다.
*   **다양한 Exporter:** 프로메테우스가 기본적으로 지원하지 않는 시스템(예: MySQL, Redis 등)의 메트릭도 'Exporter'라는 에이전트를 통해 수집할 수 있습니다.

## 아키텍처 구성 요소

프로메테우스는 여러 구성 요소가 함께 동작합니다.

*   **프로메테우스 서버:** 메트릭을 수집하고 저장하는 핵심 컴포넌트입니다.
*   **클라이언트 라이브러리/Exporter:** 애플리케이션 코드에 직접 추가하거나(라이브러리), 별도의 에이전트(Exporter)를 통해 모니터링할 대상의 메트릭을 노출합니다.
*   **Pushgateway:** 짧은 주기로 실행되는 작업과 같이 Pull 방식이 어려운 경우를 위해 데이터를 임시로 받아주는 역할을 합니다.
*   **Alertmanager:** 경고 규칙에 따라 생성된 알림을 처리하고 다양한 채널(이메일, 슬랙 등)으로 전송합니다.
*   **서비스 디스커버리:** 모니터링할 대상을 찾아내는 역할을 합니다.
